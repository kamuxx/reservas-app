<div class="w-full flex justify-center py-8 px-4">
    <p-card header="Cambiar Contraseña" styleClass="w-full max-w-lg shadow-xl dark:bg-gray-800 dark:text-white">
        <form [formGroup]="changePasswordForm" (ngSubmit)="onSubmit()" class="flex flex-col gap-6">

            <!-- Current Password -->
            <div class="flex flex-col gap-2">
                <label for="current_password" class="font-medium text-gray-700 dark:text-gray-200">Contraseña
                    Actual</label>
                <p-password id="current_password" formControlName="current_password" [feedback]="false"
                    [toggleMask]="true" styleClass="w-full" inputStyleClass="w-full p-inputtext-lg"
                    placeholder="Ingrese su contraseña actual">
                </p-password>
                <small *ngIf="f['current_password'].touched && f['current_password'].hasError('required')"
                    class="text-red-500 block mt-1">
                    La contraseña actual es requerida.
                </small>
            </div>

            <!-- New Password -->
            <div class="flex flex-col gap-2">
                <label for="new_password" class="font-medium text-gray-700 dark:text-gray-200">Nueva Contraseña</label>
                <p-password id="new_password" formControlName="new_password" [toggleMask]="true" [feedback]="true"
                    styleClass="w-full" inputStyleClass="w-full p-inputtext-lg"
                    placeholder="Ingrese su nueva contraseña">
                    <ng-template pTemplate="footer">
                        <div class="p-2 border-t border-gray-200 dark:border-gray-700 mt-2">
                            <p class="font-bold mb-2 text-gray-700 dark:text-gray-300">Requisitos:</p>
                            <ul class="pl-4 ml-2 list-disc text-sm text-gray-600 dark:text-gray-400 space-y-1">
                                <li>Mínimo 12 caracteres</li>
                                <li>Al menos una mayúscula</li>
                                <li>Al menos una minúscula</li>
                                <li>Al menos un número</li>
                                <li>Al menos un símbolo</li>
                            </ul>
                        </div>
                    </ng-template>
                </p-password>
                <small *ngIf="f['new_password'].touched && f['new_password'].hasError('required')"
                    class="text-red-500 block mt-1">
                    La nueva contraseña es requerida.
                </small>
                <small *ngIf="f['new_password'].touched && f['new_password'].hasError('minlength')"
                    class="text-red-500 block mt-1">
                    Debe tener al menos 12 caracteres.
                </small>
                <small *ngIf="f['new_password'].touched && f['new_password'].hasError('pattern')"
                    class="text-red-500 block mt-1">
                    No cumple con los requisitos de seguridad.
                </small>
            </div>

            <!-- Confirm Password -->
            <div class="flex flex-col gap-2">
                <label for="confirm_password" class="font-medium text-gray-700 dark:text-gray-200">Confirmar Nueva
                    Contraseña</label>
                <p-password id="confirm_password" formControlName="confirm_password" [feedback]="false"
                    [toggleMask]="true" styleClass="w-full" inputStyleClass="w-full p-inputtext-lg"
                    placeholder="Repita su nueva contraseña">
                </p-password>
                <small *ngIf="f['confirm_password'].touched && f['confirm_password'].hasError('required')"
                    class="text-red-500 block mt-1">
                    La confirmación es requerida.
                </small>
                <small *ngIf="f['confirm_password'].touched && f['confirm_password'].hasError('passwordMismatch')"
                    class="text-red-500 block mt-1">
                    Las contraseñas no coinciden.
                </small>
            </div>

            <div class="flex justify-end pt-4">
                <p-button label="Cambiar Contraseña" type="submit" [loading]="loading"
                    [disabled]="changePasswordForm.invalid" styleClass="w-full sm:w-auto p-button-lg">
                </p-button>
            </div>

        </form>
    </p-card>
</div>
<p-toast></p-toast>